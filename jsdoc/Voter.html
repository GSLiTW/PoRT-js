<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Voter</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Voter</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Voter<span class="signature">(port, pubKey, MPT)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="Voter"><span class="type-signature"></span>new Voter<span class="signature">(port, pubKey, MPT)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Constructor of the Voter class
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>port</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Network port number of the voter</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pubKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Wallet public key of the voter</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>MPT</code></td>
            

            <td class="type">
            
                
<span class="param-type">MPT</span>


            
            </td>

            

            

            <td class="description last">Local Merkle Patricia Trie copy of the voter</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="CombinePartialSign"><span class="type-signature"></span>CombinePartialSign<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Combine partial signatures to full signature (s, R) that can be verified against combined public key P
,then verify as Schnorr signature (s, R) over the message m and public key P.
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line193">line 193</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="CreatorUrl"><span class="type-signature"></span>CreatorUrl<span class="signature">(url)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Receive creator's network url from creator and save it in Voter's data structure
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Creator's network url</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="ExchangeCommitment"><span class="type-signature"></span>ExchangeCommitment<span class="signature">(commitments)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Exchange each voter's commitment (communication round 1) through creator
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>commitments</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line133">line 133</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="ExchangeNonce"><span class="type-signature"></span>ExchangeNonce<span class="signature">(nonces)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Get nonces from each voter (communication round 2) through creator
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>nonces</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line144">line 144</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="ExchangePartialSign"><span class="type-signature"></span>ExchangePartialSign<span class="signature">(partialsigns)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Exchange voter's partial signatures (communication round 3) through creator
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>partialsigns</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line167">line 167</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="GetPublicData"><span class="type-signature"></span>GetPublicData<span class="signature">(pubKeys, message)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Get the publicly known data for multisig from creator and store them in Voter's data structure
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pubKeys</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">wallet public keys of other voters</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">shared message between creator/voter</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line61">line 61</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="GetSignerSession"><span class="type-signature"></span>GetSignerSession<span class="signature">(SignerSession)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Get SignerSession from the first voter and store it in each voter's SignerSession
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>SignerSession</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">first voter's signer session</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line118">line 118</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="IsValid"><span class="type-signature"></span>IsValid<span class="signature">()</span><span class="type-signature"> &rarr; {bool}</span></h4>
    

    



<div class="description">
    Check if the caller is selected as voter to perform actions for the current round of block construction
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line28">line 28</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    True if the caller is the voter of the current round of block construction; False otherwise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">bool</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="PartialSign"><span class="type-signature"></span>PartialSign<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Generate partial signatures over the given message
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line159">line 159</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="PrivateSign"><span class="type-signature"></span>PrivateSign<span class="signature">(signerPrivateData)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Create the private signing session for multisig
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>signerPrivateData</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line89">line 89</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    SignerSession if it is the first voter (idx == 0); null otherwise
</div>



    





        
            

    

    
    <h4 class="name" id="VerifyBlock"><span class="type-signature"></span>VerifyBlock<span class="signature">(merkleRoot, voterMPT)</span><span class="type-signature"> &rarr; {bool}</span></h4>
    

    



<div class="description">
    Check if new block's merkle root is valid (matches the merkle root calculated by voter's local MPT copy)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>merkleRoot</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">new block's merkle root calculated by creator</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>voterMPT</code></td>
            

            <td class="type">
            
                
<span class="param-type">MPT</span>


            
            </td>

            

            

            <td class="description last">voter's local MPT copy</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line44">line 44</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    True if merkleRoot is valid; False otherwise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">bool</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="VerifyCoSig"><span class="type-signature"></span>VerifyCoSig<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Verify the signature as a normal Schnorr Signature (s, R) over message m and public key P
(ref: https://bitcoindev.network/pure-javascript-implementation-of-the-schnorr-bip/)
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="voter.js.html">voter.js</a>, <a href="voter.js.html#line203">line 203</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Voter.html">Voter</a></li><li><a href="Wallet.html">Wallet</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Mon Mar 08 2021 11:31:21 GMT+0800 (Taipei Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>